<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FC Online Player Database - Professional Search</title>
    <style>
        :root {
            --primary-color: #00e676; /* M√†u xanh l√° ƒë·∫∑c tr∆∞ng b√≥ng ƒë√° */
            --bg-color: #0f0f0f;
            --card-bg: #1a1a1a;
            --text-main: #ffffff;
            --text-sub: #b0b0b0;
            --border: #2d2d2d;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Khung t√¨m ki·∫øm chuy√™n nghi·ªáp */
        .search-wrapper {
            background: var(--card-bg);
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            width: 100%;
            max-width: 900px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }

        .search-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        input {
            background: #252525;
            border: 1px solid var(--border);
            color: white;
            padding: 14px 18px;
            border-radius: 8px;
            font-size: 15px;
            outline: none;
            transition: all 0.2s ease;
        }

        input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 230, 118, 0.2);
        }

        #stats {
            margin-top: 12px;
            font-size: 0.85rem;
            color: var(--text-sub);
            font-weight: 500;
        }

        /* B·∫£ng d·ªØ li·ªáu */
        .table-container {
            width: 100%;
            max-width: 900px;
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #252525;
            padding: 16px;
            text-align: left;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-sub);
            border-bottom: 2px solid var(--border);
        }

        td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border);
            font-size: 15px;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        /* ƒê·ªãnh d·∫°ng n·ªôi dung √¥ */
        .spid-code {
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            color: var(--primary-color);
            background: rgba(0, 230, 118, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .season-box {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .season-icon {
            width: 32px;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .player-name {
            font-weight: 600;
            color: #efefef;
        }

        #loading-overlay {
            padding: 40px;
            text-align: center;
            color: var(--primary-color);
            font-weight: bold;
        }

        /* Hi·ªáu ·ª©ng m∆∞·ª£t cho mobile */
        @media (max-width: 600px) {
            .search-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="search-wrapper">
        <div class="search-grid">
            <input type="text" id="nameInput" placeholder="üîç T√™n c·∫ßu th·ªß" oninput="filterData()">
            <input type="text" id="seasonInput" list="seasonList" placeholder="üèÜ M√πa th·∫ª" oninput="filterData()">
            <datalist id="seasonList"></datalist>
        </div>
        <div id="stats">ƒêang chu·∫©n b·ªã d·ªØ li·ªáu...</div>
    </div>

    <div id="loading-overlay">‚è≥ ƒêang t·∫£i c∆° s·ªü d·ªØ li·ªáu c·∫ßu th·ªß...</div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th style="width: 120px;">SPID</th>
                    <th>C·∫ßu th·ªß</th>
                    <th style="width: 250px;">M√πa gi·∫£i</th>
                </tr>
            </thead>
            <tbody id="playerList"></tbody>
        </table>
    </div>

<script>
    // 1. Danh s√°ch m√πa gi·∫£i (Full Data)
    const seasons = [
        {"seasonId": 100, "className": "ICONTM", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/icontm.png"},
        {"seasonId": 110, "className": "ICON TM(Bound)", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/icontm_b.png"},
        {"seasonId": 101, "className": "ICON", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/icon.png"},
        {"seasonId": 113, "className": "25IM - S&P", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25im_sp.png"},
        {"seasonId": 114, "className": "25IM - FB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25im_fb.png"},
        {"seasonId": 111, "className": "ICONS MATCH", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/filter/icon_m.png"},
        {"seasonId": 852, "className": "FAC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/fac.png"},
        {"seasonId": 851, "className": "25DP", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25dp.png"},
        {"seasonId": 848, "className": "WS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ws.png"},
        {"seasonId": 850, "className": "25FSL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25fsl.png"},
        {"seasonId": 846, "className": "DCB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/dcb.png"},
        {"seasonId": 845, "className": "CH", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ch.png"},
        {"seasonId": 849, "className": "HRT", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/hrt.png"},
        {"seasonId": 840, "className": "LE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/le.png"},
        {"seasonId": 839, "className": "NO7", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/no7.png"},
        {"seasonId": 836, "className": "WB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/wb.png"},
        {"seasonId": 829, "className": "GRU", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/gru.png"},
        {"seasonId": 828, "className": "BLD", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/bld.png"},
        {"seasonId": 827, "className": "BDO", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/bdo.png"},
        {"seasonId": 826, "className": "24EP", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24ep.png"},
        {"seasonId": 825, "className": "CU", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/cu.png"},
        {"seasonId": 821, "className": "MDL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/mdl.png"},
        {"seasonId": 815, "className": "EU24", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/eu24.png"},
        {"seasonId": 818, "className": "LD", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ld.png"},
        {"seasonId": 814, "className": "UT", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ut.png"},
        {"seasonId": 813, "className": "JNM", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/jnm.png"},
        {"seasonId": 802, "className": "DC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/dc.png"},
        {"seasonId": 801, "className": "JA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/jva.png"},
        {"seasonId": 290, "className": "FC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/fca.png"},
        {"seasonId": 291, "className": "23HW", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23hw.png"},
        {"seasonId": 289, "className": "CC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/cc.png"},
        {"seasonId": 283, "className": "HG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/hg.png"},
        {"seasonId": 284, "className": "RTN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/rtn.png"},
        {"seasonId": 272, "className": "BWC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/bwc.png"},
        {"seasonId": 273, "className": "WC22", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/wc22.png"},
        {"seasonId": 274, "className": "RMFC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/rmcf.png"},
        {"seasonId": 270, "className": "SPL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/spl.png"},
        {"seasonId": 268, "className": "LN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ln.png"},
        {"seasonId": 265, "className": "LOL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/lol.png"},
        {"seasonId": 264, "className": "FA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/fa.png"},
        {"seasonId": 835, "className": "25HR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25hr.png"},
        {"seasonId": 811, "className": "24HR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24hr.png"},
        {"seasonId": 281, "className": "23HR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23hr.png"},
        {"seasonId": 261, "className": "22HR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22hr.png"},
        {"seasonId": 256, "className": "BTB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/btb.png"},
        {"seasonId": 252, "className": "CAP", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/cap.png"},
        {"seasonId": 251, "className": "EBS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ebs.png"},
        {"seasonId": 253, "className": "BOE21", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/boe21.png"},
        {"seasonId": 249, "className": "NTG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ntg.png"},
        {"seasonId": 246, "className": "UP", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/up.png"},
        {"seasonId": 237, "className": "MC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/mc.png"},
        {"seasonId": 231, "className": "VTR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/vtr.png"},
        {"seasonId": 233, "className": "MOG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/mog.png"},
        {"seasonId": 254, "className": "CFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/cfa.png"},
        {"seasonId": 236, "className": "LA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/la.png"},
        {"seasonId": 804, "className": "23NG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23ng.png"},
        {"seasonId": 276, "className": "22NG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22ng.png"},
        {"seasonId": 262, "className": "21NG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21ng.png"},
        {"seasonId": 238, "className": "20NG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20ng.png"},
        {"seasonId": 219, "className": "19NG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19ng.png"},
        {"seasonId": 218, "className": "OTW", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/otw.png"},
        {"seasonId": 217, "className": "COC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/coc.png"},
        {"seasonId": 216, "className": "HOT", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/hot.png"},
        {"seasonId": 214, "className": "TC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/tc.png"},
        {"seasonId": 213, "className": "MCI", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/mcicon.png"},
        {"seasonId": 210, "className": "GR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/gr.png"},
        {"seasonId": 207, "className": "TT", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/tt.png"},
        {"seasonId": 206, "className": "TB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/tb.png"},
        {"seasonId": 202, "className": "TKI", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/tki.png"},
        {"seasonId": 201, "className": "NHD", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/nhd.png"},
        {"seasonId": 831, "className": "25TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25toty.png"},
        {"seasonId": 832, "className": "25TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25totn.png"},
        {"seasonId": 807, "className": "24TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24toty.png"},
        {"seasonId": 808, "className": "24TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24totn.png"},
        {"seasonId": 278, "className": "23TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23toty.png"},
        {"seasonId": 279, "className": "23TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23totn.png"},
        {"seasonId": 258, "className": "22TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22toty.png"},
        {"seasonId": 259, "className": "22TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22totn.png"},
        {"seasonId": 240, "className": "21TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21toty.png"},
        {"seasonId": 241, "className": "21TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21totn.png"},
        {"seasonId": 220, "className": "20TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20toty.png"},
        {"seasonId": 222, "className": "20TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20totn.png"},
        {"seasonId": 211, "className": "19TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19toty.png"},
        {"seasonId": 212, "className": "18TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/18toty.png"},
        {"seasonId": 844, "className": "25TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25tots.png"},
        {"seasonId": 820, "className": "24TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24tots.png"},
        {"seasonId": 287, "className": "23TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23tots.png"},
        {"seasonId": 267, "className": "22TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22tots.png"},
        {"seasonId": 250, "className": "21TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21tots.png"},
        {"seasonId": 230, "className": "20TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20tots.png"},
        {"seasonId": 215, "className": "19TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19tots.png"},
        {"seasonId": 834, "className": "24UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24ucl.png"},
        {"seasonId": 810, "className": "23UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23ucl.png"},
        {"seasonId": 280, "className": "22UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22ucl.png"},
        {"seasonId": 260, "className": "21UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21ucl.png"},
        {"seasonId": 242, "className": "20UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20ucl.png"},
        {"seasonId": 221, "className": "19UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19ucl.png"},
        {"seasonId": 234, "className": "LH", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/lh.png"},
        {"seasonId": 225, "className": "TKL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/tkl.png"},
        {"seasonId": 806, "className": "23 KFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23kfa.png"},
        {"seasonId": 293, "className": "22 KFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22kfa.png"},
        {"seasonId": 294, "className": "21 KFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21kfa.png"},
        {"seasonId": 295, "className": "19 KFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/2019kfa.png"},
        {"seasonId": 298, "className": "18 KFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/kfa.png"},
        {"seasonId": 297, "className": "MCFC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/mcfc.png"},
        {"seasonId": 247, "className": "2012 KH", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/2012kh.png"},
        {"seasonId": 516, "className": "25KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25kl.png"},
        {"seasonId": 514, "className": "24KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24kl.png"},
        {"seasonId": 512, "className": "23KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23kl.png"},
        {"seasonId": 510, "className": "22KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22kl.png"},
        {"seasonId": 507, "className": "21KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21kl.png"},
        {"seasonId": 504, "className": "20KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20kl.png"},
        {"seasonId": 853, "className": "25KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25kb.png"},
        {"seasonId": 830, "className": "24KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24klb.png"},
        {"seasonId": 805, "className": "23KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23klb.png"},
        {"seasonId": 277, "className": "22KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22klb.png"},
        {"seasonId": 257, "className": "21KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21klb.png"},
        {"seasonId": 239, "className": "20KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20klb.png"},
        {"seasonId": 517, "className": "25PL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25pla.png"},
        {"seasonId": 515, "className": "24PL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24pla.png"},
        {"seasonId": 513, "className": "23PL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23pla.png"},
        {"seasonId": 511, "className": "22PL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22pla.png"},
        {"seasonId": 508, "className": "21PL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21pla.png"},
        {"seasonId": 506, "className": "20PLA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20pla.png"},
        {"seasonId": 503, "className": "19PLS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19pls.png"},
        {"seasonId": 502, "className": "19PLA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19pla.png"},
        {"seasonId": 501, "className": "18PLS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/18pls.png"},
        {"seasonId": 500, "className": "18PLA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/plc.png"},
        {"seasonId": 300, "className": "25LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/live.png"},
        {"seasonId": 324, "className": "24LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24.png"},
        {"seasonId": 323, "className": "23LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23.png"},
        {"seasonId": 322, "className": "22LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22.png"},
        {"seasonId": 321, "className": "21LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21.png"},
        {"seasonId": 320, "className": "20LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20.png"},
        {"seasonId": 319, "className": "19LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19.png"},
        {"seasonId": 318, "className": "18LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/18.png"},
        {"seasonId": 317, "className": "17LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/17.png"},
        {"seasonId": 812, "className": "LKI", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/lki.png"},
        {"seasonId": 855, "className": "26TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/26totn.png"},
        {"seasonId": 854, "className": "26TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/26toty.png"}
    ];

    // T·∫°o Map ƒë·ªÉ t·ªëi ∆∞u t·ªëc ƒë·ªô t√¨m m√πa gi·∫£i t·ª´ ID c·∫ßu th·ªß
    const seasonMap = new Map(seasons.map(s => [s.seasonId, s]));
    let playerDB = [];

    // H√ÄM CHU·∫®N H√ìA: B·ªè d·∫•u ti·∫øng Vi·ªát, b·ªè k√Ω t·ª± ƒë·∫∑c bi·ªát nh∆∞ ' `
    function cleanString(str) {
        if (!str) return "";
        return str.normalize("NFD")
                  .replace(/[\u0300-\u036f]/g, "") // B·ªè d·∫•u
                  .replace(/ƒë/g, "d").replace(/ƒê/g, "D")
                  .replace(/[^a-zA-Z0-9 ]/g, "") // B·ªè k√Ω t·ª± ƒë·∫∑c bi·ªát nh∆∞ d·∫•u nh√°y '
                  .toLowerCase()
                  .trim();
    }

    // T·∫£i d·ªØ li·ªáu t·ª´ file JSON
    async function loadData() {
        try {
            const response = await fetch('./spid_translated.json');
            if (!response.ok) throw new Error("File spid_translated.json kh√¥ng t·ªìn t·∫°i!");
            playerDB = await response.json();
            
            // Render g·ª£i √Ω m√πa gi·∫£i v√†o Datalist
            const datalist = document.getElementById('seasonList');
            seasons.forEach(s => {
                const option = document.createElement('option');
                option.value = s.className;
                datalist.appendChild(option);
            });

            document.getElementById('loading-overlay').style.display = 'none';
            updateStats(`S·∫µn s√†ng: ${playerDB.length.toLocaleString()} c·∫ßu th·ªß.`);
        } catch (error) {
            document.getElementById('loading-overlay').innerHTML = `‚ùå L·ªói: ${error.message}`;
            console.error(error);
        }
    }

    // X·ª≠ l√Ω l·ªçc d·ªØ li·ªáu
    function filterData() {
        const nameQueryRaw = document.getElementById('nameInput').value;
        const nameQuery = cleanString(nameQueryRaw); // Chu·∫©n h√≥a t·ª´ kh√≥a t√™n
        
        const seasonQueryRaw = document.getElementById('seasonInput').value;
        const seasonQuery = seasonQueryRaw.trim().toLowerCase(); // Chu·∫©n h√≥a t·ª´ kh√≥a m√πa

        const tbody = document.getElementById('playerList');
        
        // Ch·ªâ t√¨m khi c√≥ √≠t nh·∫•t 2 k√Ω t·ª± t√™n ho·∫∑c ƒë√£ ch·ªçn m√πa
        if (nameQuery.length < 2 && seasonQuery === "") {
            tbody.innerHTML = "";
            updateStats("Vui l√≤ng nh·∫≠p th√™m th√¥ng tin ƒë·ªÉ t√¨m ki·∫øm...");
            return;
        }

        const filtered = playerDB.filter(p => {
            // L·∫•y ID m√πa gi·∫£i t·ª´ SPID
            const pSeasonId = Math.floor(p.id / 1000000);
            const seasonObj = seasonMap.get(pSeasonId);
            const seasonName = seasonObj ? seasonObj.className.toLowerCase() : "";

            // 1. So kh·ªõp t√™n (ƒê√£ chu·∫©n h√≥a kh√¥ng d·∫•u)
            const playerNameClean = cleanString(p.name);
            const isNameMatch = nameQuery === "" || playerNameClean.includes(nameQuery);
            
            // 2. So kh·ªõp m√πa gi·∫£i (S·ª¨A L·ªñI ICON vs ICONTM)
            let isSeasonMatch = true;
            if (seasonQuery !== "") {
                // ∆Øu ti√™n kh·ªõp tuy·ªát ƒë·ªëi n·∫øu g√µ ch√≠nh x√°c
                const exactMatch = (seasonName === seasonQuery);
                // Kh·ªõp m·ªôt ph·∫ßn n·∫øu t·ª´ kh√≥a ƒë·ªß d√†i (tr√°nh g√µ "i" ra h√†ng lo·∫°t)
                const partialMatch = seasonName.includes(seasonQuery) && seasonQuery.length >= 2;
                
                isSeasonMatch = exactMatch || partialMatch;
            }

            return isNameMatch && isSeasonMatch;
        });

        // Hi·ªÉn th·ªã k·∫øt qu·∫£ (S·∫Øp x·∫øp SPID m·ªõi nh·∫•t l√™n ƒë·∫ßu, gi·ªõi h·∫°n 200 d√≤ng ƒë·ªÉ m∆∞·ª£t trang)
        renderResults(filtered.sort((a, b) => b.id - a.id).slice(0, 200));
        updateStats(`T√¨m th·∫•y ${filtered.length.toLocaleString()} c·∫ßu th·ªß.`);
    }

    // Render b·∫£ng k·∫øt qu·∫£
    function renderResults(data) {
        const tbody = document.getElementById('playerList');
        if (data.length === 0) {
            tbody.innerHTML = '<tr><td colspan="3" style="text-align:center; padding: 30px; color: #888;">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ ph√π h·ª£p</td></tr>';
            return;
        }

        tbody.innerHTML = data.map(p => {
            const pSeasonId = Math.floor(p.id / 1000000);
            const season = seasonMap.get(pSeasonId);
            
            return `
                <tr>
                    <td><span class="spid-code">${p.id}</span></td>
                    <td><span class="player-name">${p.name}</span></td>
                    <td>
                        <div class="season-box">
                            ${season 
                                ? `<img src="${season.seasonImg}" class="season-icon" alt="${season.className}"> <span>${season.className}</span>` 
                                : `<span style="color:#666">M√πa ${pSeasonId}</span>`}
                        </div>
                    </td>
                </tr>
            `;
        }).join('');
    }

    function updateStats(text) {
        document.getElementById('stats').textContent = text;
    }

    window.onload = loadData;
</script>

</body>
</html>