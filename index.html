<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Tra cứu SPID FC Online - Search Seasons</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .container { max-width: 1100px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #1a237e; margin-top: 0; }
        
        .search-box { display: flex; gap: 15px; margin-bottom: 25px; background: #f8f9fa; padding: 20px; border-radius: 10px; }
        .input-group { flex: 1; position: relative; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #444; }
        input[type="text"] { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 16px; box-sizing: border-box; }
        input[type="text"]:focus { border-color: #1a237e; outline: none; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th { background: #1a237e; color: white; padding: 15px; text-align: left; position: sticky; top: 0; }
        td { padding: 12px 15px; border-bottom: 1px solid #eee; }
        tr:hover { background: #f1f4ff; }
        
        .spid { font-weight: bold; color: #c62828; background: #ffebee; padding: 3px 8px; border-radius: 4px; font-family: monospace; }
        .season-info { display: flex; align-items: center; gap: 10px; }
        .season-img { width: 30px; height: auto; }
        .loading { text-align: center; font-weight: bold; color: #1a237e; padding: 20px; }
        .stats { margin-bottom: 10px; color: #666; font-style: italic; }
    </style>
</head>
<body>

<div class="container">
    <h1>⚽ Tra cứu SPID Cầu thủ & Mùa thẻ</h1>
    
    <div class="search-box">
        <div class="input-group">
            <label>Tên cầu thủ:</label>
            <input type="text" id="nameSearch" placeholder="Ví dụ: Ronaldo, Messi..." onkeyup="filterData()">
        </div>

        <div class="input-group">
            <label>Mùa giải:</label>
            <input type="text" id="seasonInput" list="seasonData" placeholder="Gõ tên mùa (Ví dụ: 25 TOTY, ICON...)" oninput="filterData()">
            <datalist id="seasonData"></datalist>
        </div>
    </div>

    <div id="loading" class="loading">Đang tải dữ liệu...</div>
    <div id="stats" class="stats"></div>

    <table>
        <thead>
            <tr>
                <th style="width: 15%;">SPID ↓</th>
                <th style="width: 45%;">Tên Cầu Thủ</th>
                <th style="width: 40%;">Mùa Giải</th>
            </tr>
        </thead>
        <tbody id="playerTable"></tbody>
    </table>
</div>

<script>
    // Dữ liệu mùa giải (ĐÃ SỬA LỖI CÚ PHÁP)
    const seasons = [
        {"seasonId": 100, "className": "ICONTM", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/icontm.png"},
        {"seasonId": 110, "className": "ICON TM(Bound)", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/icontm_b.png"},
        {"seasonId": 101, "className": "ICON", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/icon.png"},
        {"seasonId": 113, "className": "25IM - S&P", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25im_sp.png"},
        {"seasonId": 114, "className": "25IM - FB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25im_fb.png"},
        {"seasonId": 111, "className": "ICONS MATCH", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/filter/icon_m.png"},
        {"seasonId": 852, "className": "FAC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/fac.png"},
        {"seasonId": 851, "className": "25DP", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25dp.png"},
        {"seasonId": 848, "className": "WS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ws.png"},
        {"seasonId": 850, "className": "25FSL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25fsl.png"},
        {"seasonId": 846, "className": "DCB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/dcb.png"},
        {"seasonId": 845, "className": "CH", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ch.png"},
        {"seasonId": 849, "className": "HRT", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/hrt.png"},
        {"seasonId": 840, "className": "LE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/le.png"},
        {"seasonId": 839, "className": "NO7", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/no7.png"},
        {"seasonId": 836, "className": "WB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/wb.png"},
        {"seasonId": 829, "className": "GRU", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/gru.png"},
        {"seasonId": 828, "className": "BLD", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/bld.png"},
        {"seasonId": 827, "className": "BDO", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/bdo.png"},
        {"seasonId": 826, "className": "24EP", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24ep.png"},
        {"seasonId": 825, "className": "CU", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/cu.png"},
        {"seasonId": 821, "className": "MDL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/mdl.png"},
        {"seasonId": 815, "className": "EU24", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/eu24.png"},
        {"seasonId": 818, "className": "LD", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ld.png"},
        {"seasonId": 814, "className": "UT", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ut.png"},
        {"seasonId": 813, "className": "JNM", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/jnm.png"},
        {"seasonId": 802, "className": "DC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/dc.png"},
        {"seasonId": 801, "className": "JA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/jva.png"},
        {"seasonId": 290, "className": "FC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/fca.png"},
        {"seasonId": 291, "className": "23HW", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23hw.png"},
        {"seasonId": 289, "className": "CC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/cc.png"},
        {"seasonId": 283, "className": "HG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/hg.png"},
        {"seasonId": 284, "className": "RTN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/rtn.png"},
        {"seasonId": 272, "className": "BWC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/bwc.png"},
        {"seasonId": 273, "className": "WC22", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/wc22.png"},
        {"seasonId": 274, "className": "RMFC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/rmcf.png"},
        {"seasonId": 270, "className": "SPL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/spl.png"},
        {"seasonId": 268, "className": "LN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ln.png"},
        {"seasonId": 265, "className": "LOL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/lol.png"},
        {"seasonId": 264, "className": "FA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/fa.png"},
        {"seasonId": 835, "className": "25HR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25hr.png"},
        {"seasonId": 811, "className": "24HR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24hr.png"},
        {"seasonId": 281, "className": "23HR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23hr.png"},
        {"seasonId": 261, "className": "22HR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22hr.png"},
        {"seasonId": 256, "className": "BTB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/btb.png"},
        {"seasonId": 252, "className": "CAP", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/cap.png"},
        {"seasonId": 251, "className": "EBS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ebs.png"},
        {"seasonId": 253, "className": "BOE21", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/boe21.png"},
        {"seasonId": 249, "className": "NTG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/ntg.png"},
        {"seasonId": 246, "className": "UP", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/up.png"},
        {"seasonId": 237, "className": "MC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/mc.png"},
        {"seasonId": 231, "className": "VTR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/vtr.png"},
        {"seasonId": 233, "className": "MOG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/mog.png"},
        {"seasonId": 254, "className": "CFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/cfa.png"},
        {"seasonId": 236, "className": "LA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/la.png"},
        {"seasonId": 804, "className": "23NG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23ng.png"},
        {"seasonId": 276, "className": "22NG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22ng.png"},
        {"seasonId": 262, "className": "21NG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21ng.png"},
        {"seasonId": 238, "className": "20NG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20ng.png"},
        {"seasonId": 219, "className": "19NG", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19ng.png"},
        {"seasonId": 218, "className": "OTW", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/otw.png"},
        {"seasonId": 217, "className": "COC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/coc.png"},
        {"seasonId": 216, "className": "HOT", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/hot.png"},
        {"seasonId": 214, "className": "TC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/tc.png"},
        {"seasonId": 213, "className": "MCI", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/mcicon.png"},
        {"seasonId": 210, "className": "GR", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/gr.png"},
        {"seasonId": 207, "className": "TT", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/tt.png"},
        {"seasonId": 206, "className": "TB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/tb.png"},
        {"seasonId": 202, "className": "TKI", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/tki.png"},
        {"seasonId": 201, "className": "NHD", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/nhd.png"},
        {"seasonId": 831, "className": "25TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25toty.png"},
        {"seasonId": 832, "className": "25TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25totn.png"},
        {"seasonId": 807, "className": "24TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24toty.png"},
        {"seasonId": 808, "className": "24TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24totn.png"},
        {"seasonId": 278, "className": "23TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23toty.png"},
        {"seasonId": 279, "className": "23TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23totn.png"},
        {"seasonId": 258, "className": "22TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22toty.png"},
        {"seasonId": 259, "className": "22TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22totn.png"},
        {"seasonId": 240, "className": "21TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21toty.png"},
        {"seasonId": 241, "className": "21TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21totn.png"},
        {"seasonId": 220, "className": "20TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20toty.png"},
        {"seasonId": 222, "className": "20TYN", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20totn.png"},
        {"seasonId": 211, "className": "19TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19toty.png"},
        {"seasonId": 212, "className": "18TY", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/18toty.png"},
        {"seasonId": 844, "className": "25TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25tots.png"},
        {"seasonId": 820, "className": "24TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24tots.png"},
        {"seasonId": 287, "className": "23TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23tots.png"},
        {"seasonId": 267, "className": "22TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22tots.png"},
        {"seasonId": 250, "className": "21TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21tots.png"},
        {"seasonId": 230, "className": "20TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20tots.png"},
        {"seasonId": 215, "className": "19TS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19tots.png"},
        {"seasonId": 834, "className": "24UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24ucl.png"},
        {"seasonId": 810, "className": "23UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23ucl.png"},
        {"seasonId": 280, "className": "22UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22ucl.png"},
        {"seasonId": 260, "className": "21UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21ucl.png"},
        {"seasonId": 242, "className": "20UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20ucl.png"},
        {"seasonId": 221, "className": "19UCL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19ucl.png"},
        {"seasonId": 234, "className": "LH", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/lh.png"},
        {"seasonId": 225, "className": "TKL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/tkl.png"},
        {"seasonId": 806, "className": "23 KFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23kfa.png"},
        {"seasonId": 293, "className": "22 KFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22kfa.png"},
        {"seasonId": 294, "className": "21 KFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21kfa.png"},
        {"seasonId": 295, "className": "19 KFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/2019kfa.png"},
        {"seasonId": 298, "className": "18 KFA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/kfa.png"},
        {"seasonId": 297, "className": "MCFC", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/mcfc.png"},
        {"seasonId": 247, "className": "2012 KH", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/2012kh.png"},
        {"seasonId": 516, "className": "25KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25kl.png"},
        {"seasonId": 514, "className": "24KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24kl.png"},
        {"seasonId": 512, "className": "23KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23kl.png"},
        {"seasonId": 510, "className": "22KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22kl.png"},
        {"seasonId": 507, "className": "21KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21kl.png"},
        {"seasonId": 504, "className": "20KLeague", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20kl.png"},
        {"seasonId": 853, "className": "25KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25kb.png"},
        {"seasonId": 830, "className": "24KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24klb.png"},
        {"seasonId": 805, "className": "23KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23klb.png"},
        {"seasonId": 277, "className": "22KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22klb.png"},
        {"seasonId": 257, "className": "21KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21klb.png"},
        {"seasonId": 239, "className": "20KB", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20klb.png"},
        {"seasonId": 517, "className": "25PL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/25pla.png"},
        {"seasonId": 515, "className": "24PL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24pla.png"},
        {"seasonId": 513, "className": "23PL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23pla.png"},
        {"seasonId": 511, "className": "22PL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22pla.png"},
        {"seasonId": 508, "className": "21PL", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21pla.png"},
        {"seasonId": 506, "className": "20PLA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20pla.png"},
        {"seasonId": 503, "className": "19PLS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19pls.png"},
        {"seasonId": 502, "className": "19PLA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19pla.png"},
        {"seasonId": 501, "className": "18PLS", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/18pls.png"},
        {"seasonId": 500, "className": "18PLA", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/plc.png"},
        {"seasonId": 300, "className": "25LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/live.png"},
        {"seasonId": 324, "className": "24LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/24.png"},
        {"seasonId": 323, "className": "23LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/23.png"},
        {"seasonId": 322, "className": "22LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/22.png"},
        {"seasonId": 321, "className": "21LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/21.png"},
        {"seasonId": 320, "className": "20LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/20.png"},
        {"seasonId": 319, "className": "19LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/19.png"},
        {"seasonId": 318, "className": "18LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/18.png"},
        {"seasonId": 317, "className": "17LIVE", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/17.png"},
        {"seasonId": 812, "className": "LKI", "seasonImg": "https://ssl.nexon.com/s2/game/fc/online/obt/externalAssets/new/season/lki.png"}
    ];

    let playerDB = [];

    async function loadData() {
        try {
            // Thêm ./ để đảm bảo đường dẫn đúng
            const response = await fetch('./spid_translated.json');
            if (!response.ok) throw new Error("Không tìm thấy file dữ liệu!");
            playerDB = await response.json();
            
            const datalist = document.getElementById('seasonData');
            seasons.forEach(s => {
                const option = document.createElement('option');
                option.value = s.className;
                datalist.appendChild(option);
            });

            document.getElementById('loading').style.display = 'none';
            document.getElementById('stats').textContent = `Đã tải ${playerDB.length.toLocaleString()} cầu thủ.`;
        } catch (error) {
            document.getElementById('loading').innerHTML = `❌ Lỗi: ${error.message}`;
            console.error(error);
        }
    }

    function filterData() {
        const nameQuery = document.getElementById('nameSearch').value.toLowerCase().trim();
        const seasonInputText = document.getElementById('seasonInput').value.toLowerCase().trim();
        const tbody = document.getElementById('playerTable');
        
        if (nameQuery.length < 2 && seasonInputText === "") {
            tbody.innerHTML = "";
            document.getElementById('stats').textContent = "Nhập tên hoặc mùa giải để tìm...";
            return;
        }

        let targetSeasonId = null;
        if (seasonInputText !== "") {
            const foundSeason = seasons.find(s => s.className.toLowerCase().includes(seasonInputText));
            if (foundSeason) targetSeasonId = foundSeason.seasonId;
        }

        // 1. Lọc dữ liệu
        const filtered = playerDB.filter(p => {
            const nameMatch = p.name.toLowerCase().includes(nameQuery);
            const pSeasonId = Math.floor(p.id / 1000000);
            const seasonMatch = (seasonInputText === "" || pSeasonId === targetSeasonId);
            return nameMatch && seasonMatch;
        });

        // 2. Sắp xếp SPID từ CAO đến THẤP
        filtered.sort((a, b) => b.id - a.id);

        // 3. Hiển thị dữ liệu
        tbody.innerHTML = "";
        filtered.slice(0, 200).forEach(p => {
            const pSeasonId = Math.floor(p.id / 1000000);
            const seasonObj = seasons.find(s => s.seasonId === pSeasonId);
            
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><span class="spid">${p.id}</span></td>
                <td><strong>${p.name}</strong></td>
                <td>
                    <div class="season-info">
                        ${seasonObj ? `<img src="${seasonObj.seasonImg}" class="season-img"> <span>${seasonObj.className}</span>` : `Mùa ${pSeasonId}`}
                    </div>
                </td>
            `;
            tbody.appendChild(tr);
        });

        document.getElementById('stats').textContent = `Tìm thấy ${filtered.length.toLocaleString()} kết quả.`;
    }

    window.onload = loadData;
</script>

</body>
</html>